<?xml version="1.0" encoding="utf-8"?>
<!--Autogenerated by CreoleToXMLSchema!-->
<database name="infinitymetricsm303">
  <table name="channel" idMethod="native">
    <column name="channel_id" type="INTEGER" required="true" autoIncrement="true" primaryKey="true"/>
    <column name="project_jn_name" type="VARCHAR" size="50" required="true" primaryKey="true"/>
    <column name="channel_name" type="VARCHAR" size="30" required="true" primaryKey="true"/>
    <column name="title" type="VARCHAR" size="255"/>
    <column name="category" type="CHAR" required="true"/>
    <foreign-key foreignTable="project" onDelete="CASCADE" onUpdate="RESTRICT">
      <reference local="project_jn_name" foreign="project_jn_name"/>
    </foreign-key>
    <index name="idx_channel_category">
      <index-column name="category"/>
    </index>
    <index name="idx_fk_channel_project_jn_name">
      <index-column name="project_jn_name"/>
    </index>
  </table>
  <table name="custom_event" idMethod="native">
    <column name="custom_event_id" type="SMALLINT" required="true" autoIncrement="true" primaryKey="true"/>
    <column name="title" type="VARCHAR" size="64" required="true"/>
    <column name="date" type="DATE" required="true"/>
    <column name="project_jn_name" type="VARCHAR" size="50" required="true"/>
    <foreign-key foreignTable="project" onDelete="CASCADE" onUpdate="RESTRICT">
      <reference local="project_jn_name" foreign="project_jn_name"/>
    </foreign-key>
    <index name="idx_fk_custom_event_project_jn_name">
      <index-column name="project_jn_name"/>
    </index>
  </table>
  <table name="custom_event_entry" idMethod="native">
    <column name="entry_id" type="INTEGER" required="true" autoIncrement="true" primaryKey="true"/>
    <column name="notes" type="VARCHAR" size="255" required="true"/>
    <column name="custom_event_id" type="SMALLINT" required="true"/>
    <column name="date" type="TIMESTAMP" required="true" default="CURRENT_TIMESTAMP"/>
    <foreign-key foreignTable="custom_event" onDelete="CASCADE" onUpdate="RESTRICT">
      <reference local="custom_event_id" foreign="custom_event_id"/>
    </foreign-key>
    <index name="idx_fk_entry_custom_event_id">
      <index-column name="custom_event_id"/>
    </index>
  </table>
  <table name="event">
    <column name="channel_id" type="INTEGER" required="true" primaryKey="true"/>
    <column name="event_id" type="VARCHAR" size="30" required="true" primaryKey="true"/>
    <column name="jn_username" type="VARCHAR" size="32" required="true"/>
    <column name="date" type="TIMESTAMP" required="true" default="CURRENT_TIMESTAMP"/>
    <foreign-key foreignTable="user" onDelete="CASCADE" onUpdate="RESTRICT">
      <reference local="jn_username" foreign="jn_username"/>
    </foreign-key>
    <foreign-key foreignTable="channel" onDelete="CASCADE" onUpdate="RESTRICT">
      <reference local="channel_id" foreign="channel_id"/>
    </foreign-key>
    <index name="idx_creator_username">
      <index-column name="jn_username"/>
    </index>
    <index name="idx_publication_date">
      <index-column name="date"/>
    </index>
  </table>
  <table name="institution" idMethod="native">
    <column name="institution_id" type="SMALLINT" required="true" autoIncrement="true" primaryKey="true"/>
    <column name="name" type="VARCHAR" size="255" required="true"/>
    <column name="abbreviation" type="VARCHAR" size="16" required="true"/>
    <column name="city" type="VARCHAR" size="255" required="true"/>
    <column name="state_province" type="VARCHAR" size="255" required="true"/>
    <column name="country" type="VARCHAR" size="255" required="true"/>
    <unique name="idx_unique_institution_abbreviation">
      <unique-column name="abbreviation"/>
    </unique>
  </table>
  <table name="project">
    <column name="project_jn_name" type="VARCHAR" size="50" required="true" primaryKey="true"/>
    <column name="summary" type="VARCHAR" size="64"/>
  </table>
  <table name="student_x_project">
    <column name="user_id" type="INTEGER" required="true" primaryKey="true"/>
    <column name="project_jn_name" type="VARCHAR" size="50" required="true" primaryKey="true"/>
    <column name="is_leader" type="TINYINT" required="true" default="0"/>
    <foreign-key foreignTable="user" onDelete="RESTRICT" onUpdate="RESTRICT">
      <reference local="user_id" foreign="user_id"/>
    </foreign-key>
    <foreign-key foreignTable="project" onDelete="CASCADE" onUpdate="RESTRICT">
      <reference local="project_jn_name" foreign="project_jn_name"/>
    </foreign-key>
    <index name="idx_fk_project_x_project_jn_name">
      <index-column name="project_jn_name"/>
    </index>
  </table>
  <table name="user" idMethod="native">
    <column name="user_id" type="INTEGER" required="true" autoIncrement="true" primaryKey="true"/>
    <column name="jn_username" type="VARCHAR" size="32" required="true"/>
    <column name="jn_password" type="VARCHAR" size="32" required="true"/>
    <column name="first_name" type="VARCHAR" size="50" required="true"/>
    <column name="last_name" type="VARCHAR" size="50" required="true"/>
    <column name="email" type="VARCHAR" size="255" required="true"/>
    <column name="type" type="CHAR"/>
    <column name="institution_id" type="SMALLINT" required="true"/>
    <foreign-key foreignTable="institution" onDelete="RESTRICT" onUpdate="RESTRICT">
      <reference local="institution_id" foreign="institution_id"/>
    </foreign-key>
    <unique name="username">
      <unique-column name="jn_username"/>
    </unique>
    <index name="idx_fk_user_institution_id">
      <index-column name="institution_id"/>
    </index>
  </table>
  <table name="workpace_x_project">
    <column name="workspace_id" type="SMALLINT" required="true" primaryKey="true"/>
    <column name="project_jn_name" type="VARCHAR" size="50" required="true" primaryKey="true"/>
    <column name="summary" type="VARCHAR" size="64"/>
    <foreign-key foreignTable="workspace" onDelete="CASCADE" onUpdate="RESTRICT">
      <reference local="workspace_id" foreign="workspace_id"/>
    </foreign-key>
    <foreign-key foreignTable="project" onDelete="CASCADE" onUpdate="RESTRICT">
      <reference local="project_jn_name" foreign="project_jn_name"/>
    </foreign-key>
    <index name="idx_fk_workspace_x_project_jn_name">
      <index-column name="project_jn_name"/>
    </index>
  </table>
  <table name="workspace" idMethod="native">
    <column name="workspace_id" type="SMALLINT" required="true" autoIncrement="true" primaryKey="true"/>
    <column name="state" type="CHAR" required="true" default="NEW"/>
    <column name="user_id" type="INTEGER" required="true"/>
    <column name="title" type="VARCHAR" size="64" required="true"/>
    <column name="description" type="VARCHAR" size="255"/>
    <foreign-key foreignTable="user" onDelete="CASCADE" onUpdate="RESTRICT">
      <reference local="user_id" foreign="user_id"/>
    </foreign-key>
    <index name="idx_fk_worspace_user_id">
      <index-column name="user_id"/>
    </index>
    <index name="idx_state">
      <index-column name="state"/>
    </index>
  </table>
  <table name="workspace_share">
    <column name="workspace_id" type="SMALLINT" required="true" primaryKey="true"/>
    <column name="user_id" type="INTEGER" required="true" primaryKey="true"/>
    <foreign-key foreignTable="workspace" onDelete="CASCADE" onUpdate="RESTRICT">
      <reference local="workspace_id" foreign="workspace_id"/>
    </foreign-key>
    <foreign-key foreignTable="user" onDelete="CASCADE" onUpdate="RESTRICT">
      <reference local="user_id" foreign="user_id"/>
    </foreign-key>
    <index name="idx_fk_share_user_id">
      <index-column name="user_id"/>
    </index>
  </table>
</database>
